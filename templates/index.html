<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dreamMail</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="/static/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;800&display=swap" rel="stylesheet">
</head>
<body>
    <div id="app" class="container">
        <!-- Loading State -->
        <div id="loading" class="loading-screen">
            <div class="loader"></div>
            <p>–ó–∞–≥—Ä—É–∑–∫–∞ dreamMail...</p>
        </div>

        <!-- Dashboard -->
        <div id="dashboard" class="bento-grid" style="display: none;">
            
            <!-- Header / Welcome -->
            <div class="card welcome-card">
                <h1>dreamMail</h1>
                <div class="user-info" id="user-profile-btn" style="cursor: pointer;">
                    <img id="user-avatar" src="" alt="avatar" class="avatar">
                    <div class="user-details">
                        <h2 id="user-name">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h2>
                        <span class="status-badge">Online</span>
                    </div>
                </div>
            </div>

            <!-- Controls: Search & Aliases -->
            <div class="card controls-card">
                <div class="search-container" id="mobile-search-container">
                    <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ –ø–∏—Å—å–º–∞–º...">
                </div>
                <div class="alias-controls">
                    <div id="alias-scroller" class="alias-scroller">
                        <!-- Alias pills injected here -->
                        <div class="alias-pill active">–í—Å–µ</div>
                    </div>
                    <button id="create-alias-btn" class="icon-btn" title="–°–æ–∑–¥–∞—Ç—å —è—â–∏–∫">+</button>
                </div>
            </div>

            <!-- Recent Emails -->
            <div class="card emails-card">
                <div id="pc-search-placeholder" style="display: none; margin-bottom: 15px;"></div>
                
                <div class="emails-header-actions" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <h3>–í—Ö–æ–¥—è—â–∏–µ</h3>
                    <div id="mass-actions" style="display: none; align-items: center; gap: 10px;">
                        <span id="selected-count" style="font-size: 12px; color: #666;">0 –≤—ã–±—Ä–∞–Ω–æ</span>
                        <button id="delete-selected-btn" class="btn-delete-small">–£–¥–∞–ª–∏—Ç—å</button>
                    </div>
                </div>
                
                <div class="select-all-container" style="padding: 0 0 10px 0; border-bottom: 1px solid #f0f0f0; display: flex; align-items: center; gap: 10px;">
                    <input type="checkbox" id="select-all-checkbox" style="width: 18px; height: 18px; cursor: pointer;">
                    <label for="select-all-checkbox" style="font-size: 13px; color: #666; cursor: pointer;">–í—ã–±—Ä–∞—Ç—å –≤—Å–µ</label>
                </div>

                <div class="emails-list-container">
                    <ul id="emails-list" class="email-list">
                        <!-- Emails will be injected here -->
                    </ul>
                </div>
                
                <!-- Pagination -->
                <div id="pagination" class="pagination-controls" style="display: flex; justify-content: center; gap: 10px; margin-top: 15px; align-items: center;">
                    <button id="prev-page-btn" class="btn-page" disabled>&lt;</button>
                    <span id="page-indicator" style="font-size: 14px; color: #666;">–°—Ç—Ä. 1</span>
                    <button id="next-page-btn" class="btn-page">&gt;</button>
                </div>

                <!-- Info Link -->
                <div style="text-align: center; margin-top: 20px; padding-bottom: 10px;">
                    <a href="#" id="info-link" style="color: #999; text-decoration: none; font-size: 12px; font-weight: 300;">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</a>
                </div>
            </div>
        </div>
        
        <!-- Info View -->
        <div id="info-view" class="info-view-container" style="display: none;">
            <div class="card info-card" style="max-width: 600px; margin: 0 auto;">
                <button id="info-back-btn" class="back-btn" style="display: flex; align-items: center; gap: 8px;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
                    –ù–∞–∑–∞–¥
                </button>
                <h2 style="margin-bottom: 20px; text-align: center;">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
                <div style="padding: 10px 0; line-height: 1.6; color: #333; font-size: 14px;">
                    <p style="margin-bottom: 15px;">
                        –ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω —ç–Ω—Ç—É–∑–∏–∞—Å—Ç–æ–º –¥–ª—è –ª–∏—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
                    </p>
                    <div style="background: #f9f9f9; padding: 15px; border-radius: 8px; border-left: 4px solid #999; margin-bottom: 20px;">
                        <p style="margin-bottom: 10px;"><strong>–û—Ç–∫–∞–∑ –æ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:</strong></p>
                        <p style="margin-bottom: 10px;">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–µ –Ω–µ—Å–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–∞, —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –∏ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.</p>
                        <p>–°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É "–∫–∞–∫ –µ—Å—Ç—å" (as is), –±–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –≥–∞—Ä–∞–Ω—Ç–∏–π.</p>
                    </div>
                    
                    <p style="margin-bottom: 15px; color: #d32f2f;">
                        <strong>–ö–∞—Ç–µ–≥–æ—Ä–∏—á–µ—Å–∫–∏ –∑–∞–ø—Ä–µ—â–µ–Ω–æ:</strong> –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ –≤ –ø—Ä–æ—Ç–∏–≤–æ–ø—Ä–∞–≤–Ω—ã—Ö —Ü–µ–ª—è—Ö, –≤–∫–ª—é—á–∞—è, –Ω–æ –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—è—Å—å: —ç–∫—Å—Ç—Ä–µ–º–∏–∑–º, —Ç–µ—Ä—Ä–æ—Ä–∏–∑–º, –º–æ—à–µ–Ω–Ω–∏—á–µ—Å—Ç–≤–æ.
                        –ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.
                    </p>
                    
                    <p style="margin-bottom: 10px;">üîí –í—Å–µ —è—â–∏–∫–∏ —Ç–æ–ª—å–∫–æ –≤–∞—à–∏ –∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö —Ç–µ–ª–µ–≥—Ä–∞–º.</p>
                    <p style="margin-bottom: 10px;">üö´ –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å–µ–º –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è.</p>
                    
                    <p style="margin-top: 20px; border-top: 1px solid #eee; padding-top: 15px;">
                        –ì–ª–∞–≤–Ω—ã–π —Å–∞–π—Ç —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã: <a href="https://dreampartners.online" target="_blank" style="color: #007bff; text-decoration: none;">dreampartners.online</a>
                    </p>
                    
                    <p style="margin-top: 10px;">üìß –ü–æ –≤–æ–ø—Ä–æ—Å–∞–º: <a href="mailto:admin@dreampartners.online" style="color: #333;">admin@dreampartners.online</a></p>
                </div>
            </div>
        </div>
        
        <!-- Email Detail View -->
        <div id="email-view" class="email-view-container" style="display: none;">
            <div class="card email-detail-card">
                <button id="back-button" class="back-btn" style="display: flex; align-items: center; gap: 8px;">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
                    –ù–∞–∑–∞–¥
                </button>
                <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                    <h2 id="email-subject" style="flex: 1; padding-right: 10px;">–¢–µ–º–∞</h2>
                    <button id="email-delete-btn" class="btn-delete" title="–£–¥–∞–ª–∏—Ç—å –ø–∏—Å—å–º–æ" style="display: flex; align-items: center; gap: 6px;">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
                        <span>–£–¥–∞–ª–∏—Ç—å</span>
                    </button>
                </div>
                <div class="email-meta">
                    <span id="email-from" class="meta-from">–û—Ç –∫–æ–≥–æ</span>
                    <span id="email-date" class="meta-date">–î–∞—Ç–∞</span>
                </div>
                <hr class="divider">
                <div id="email-body" class="email-body-content">
                    <!-- Content -->
                </div>
            </div>
        </div>
        
        <!-- Settings View -->
        <div id="settings-view" class="settings-view-container" style="display: none;">
            <div class="card settings-card">
                <button id="settings-back-btn" class="back-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
                    –ù–∞–∑–∞–¥
                </button>
                <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —è—â–∏–∫–æ–≤</h2>
                <div id="settings-list" class="settings-list">
                    <!-- Settings items injected here -->
                </div>
                
                <!-- Info button removed from settings -->
                <button id="logout-btn" class="btn-secondary" style="margin-top: 20px; width: 100%; color: #d32f2f; border: 1px solid #ffcdd2;">–í—ã–π—Ç–∏</button>
            </div>     <!-- Admin Button Placeholder -->
                <div id="admin-entry-point" style="margin-top: 20px; text-align: center; display: none;">
                    <button id="open-admin-btn" class="btn-primary" style="width: 100%;">–ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å</button>
                </div>
            </div>
        </div>

        <!-- Admin View -->
        <div id="admin-view" class="admin-view-container" style="display: none;">
            <div class="card admin-card">
                <button id="admin-back-btn" class="back-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
                    –ù–∞–∑–∞–¥
                </button>
                <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h2>
                <div id="admin-users-list" class="admin-users-list"></div>
            </div>
        </div>

        <!-- Admin User Detail View -->
        <div id="admin-user-detail-view" class="admin-detail-view-container" style="display: none;">
            <div class="card admin-detail-card">
                <button id="admin-detail-back-btn" class="back-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
                    –ö —Å–ø–∏—Å–∫—É
                </button>
                <h2 id="admin-user-title">User ID</h2>
                <div class="admin-actions-bar">
                    <button id="admin-block-btn" class="btn-secondary">–ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å</button>
                    <button id="admin-delete-user-btn" class="btn-delete">–£–¥–∞–ª–∏—Ç—å User</button>
                </div>
                <h3>–Ø—â–∏–∫–∏</h3>
                <div id="admin-user-aliases" class="settings-list"></div>
                <button id="admin-add-alias-btn" class="btn-primary" style="margin-top: 10px;">+ –î–æ–±–∞–≤–∏—Ç—å —è—â–∏–∫</button>
                
                <h3 style="margin-top: 20px;">–ü–∏—Å—å–º–∞</h3>
                <div id="admin-user-emails" class="settings-list"></div>
                <button id="admin-load-more-emails-btn" class="btn-secondary" style="margin-top: 10px; display: none;">–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â–µ</button>
            </div>
        </div>

        <!-- Create Alias Modal -->
        <div id="create-modal" class="modal-overlay" style="display: none;">
            <div class="modal-card">
                <h3>–ù–æ–≤—ã–π —è—â–∏–∫</h3>
                <p>–í—ã–±–µ—Ä–∏—Ç–µ –∏–º—è –∏ –¥–æ–º–µ–Ω</p>
                
                <div class="create-form">
                    <div class="input-group">
                        <input type="text" id="new-alias-local" placeholder="–∏–º—è" class="input-local">
                        <span class="at-symbol">@</span>
                    </div>
                    <select id="new-alias-domain" class="select-domain">
                        <option value="dreampartners.online">dreampartners.online</option>
                        <option value="nefor-casino.online">nefor-casino.online</option>
                    </select>
                </div>

                <div class="modal-buttons">
                    <button id="cancel-create" class="btn-secondary">–û—Ç–º–µ–Ω–∞</button>
                    <button id="confirm-create" class="btn-primary">–°–æ–∑–¥–∞—Ç—å</button>
                </div>
            </div>
        </div>

        <!-- Error State -->
        <div id="error" class="error-screen" style="display: none;">
            <h2>–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω</h2>
            <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–∫—Ä–æ–π—Ç–µ —á–µ—Ä–µ–∑ Telegram –±–æ—Ç.</p>
        </div>
    </div>

    <script src="/static/js/main.js"></script>
</body>
</html>
